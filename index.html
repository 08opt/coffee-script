


<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <title>CoffeeScript</title>
  <link rel="stylesheet" type="text/css" href="documentation/css/docs.css" />
  <link rel="stylesheet" type="text/css" href="documentation/css/idle.css" />
</head>
<body>

  <div class="container">

    <h1><sub style="font-size: 100px;">&#9749;</sub> CoffeeScript</h1>

    <p>
      CoffeeScript is a little language that compiles into JavaScript. Think
      of it as JavaScript's less ostentatious kid brother &mdash; the same genes,
      roughly the same height, but a different sense of style. Apart from a handful of
      bonus goodies, statements in CoffeeScript correspond one-to-one with their
      equivalent in JavaScript, it's just another way of saying it.
    </p>

    <!-- -->

    <p>
      <b>Disclaimer:</b>
      CoffeeScript is just for fun and seriously alpha. I'm sure that there are still
      plenty of holes in the lexer and leaks in the syntax. <i>There is no guarantee,
      explicit or implied, of its suitability for any purpose.</i> That said,
      it compiles into clean JavaScript (the good parts) that can use existing
      JavaScript libraries seamlessly, and passes through
      <a href="http://www.jslint.com/">JSLint</a> without warnings. The compiled
      output is quite readable &mdash; pretty-printed, with comments
      preserved intact.
    </p>

    <h2>Table of Contents</h2>

    <p>
      <a href="#overview">Mini Overview</a><br />
      <a href="#installation">Installation and Usage</a><br />
      <a href="#punctuation">Punctuation Primer</a><br />
      <a href="#functions">Functions and Invocation</a><br />
      <a href="#assignment">Assignment</a><br />
      <a href="#objects_and_arrays">Objects and Arrays</a><br />
      <a href="#lexical_scope">Lexical Scoping and Variable Safety</a><br />
      <a href="#conditionals">Conditionals, Ternaries, and Conditional Assignment</a><br />
      <a href="#expressions">Everything is an Expression</a><br />
      <a href="#aliases">Aliases</a><br />
      <a href="#while">While Loops</a><br />
      <a href="#array_comprehensions">Array Comprehensions</a><br />
      <a href="#slice">Array Slice Literals</a><br />
      <a href="#super">Calling Super from a Subclass</a><br />
      <a href="#embedded">Embedded JavaScript</a><br />
      <a href="#switch">Switch/When/Else</a><br />
      <a href="#try">Try/Catch/Finally</a><br />
      <a href="#strings">Multiline Strings</a><br />
      <a href="#contributing">Contributing</a><br />
      <a href="#change_log">Change Log</a><br />
    </p>

    <h2 id="overview">Mini Overview</h2>

    <p><i>CoffeeScript on the left, compiled JavaScript output on the right.</i></p>

    <div class='code'><pre class="idle"><span class="Comment"><span class="Comment">#</span> Assignment:</span>
number<span class="Keyword">:</span> <span class="Number">42</span>
opposite_day<span class="Keyword">:</span> <span class="BuiltInConstant">true</span>

<span class="Comment"><span class="Comment">#</span> Conditions:</span>
number<span class="Keyword">:</span> <span class="Keyword">-</span><span class="Number">42</span> <span class="Keyword">if</span> opposite_day

<span class="Comment"><span class="Comment">#</span> Functions:</span>
<span class="FunctionName">square</span><span class="Keyword">:</span> <span class="FunctionArgument">x</span> <span class="Storage">=&gt;</span> x <span class="Keyword">*</span> x.

<span class="Comment"><span class="Comment">#</span> Arrays:</span>
list<span class="Keyword">:</span> [<span class="Number">1</span>, <span class="Number">2</span>, <span class="Number">3</span>, <span class="Number">4</span>, <span class="Number">5</span>]

<span class="Comment"><span class="Comment">#</span> Objects:</span>
math<span class="Keyword">:</span> {
  root<span class="Keyword">:</span>   Math.sqrt
  square<span class="Keyword">:</span> square
  <span class="FunctionName">cube</span><span class="Keyword">:</span>   <span class="FunctionArgument">x</span> <span class="Storage">=&gt;</span> x <span class="Keyword">*</span> square(x).
}

<span class="Comment"><span class="Comment">#</span> Array comprehensions:</span>
cubed_list<span class="Keyword">:</span> math.cube(num) <span class="Keyword">for</span> num <span class="Keyword">in</span> list.
</pre><pre class="idle">
<span class="Comment"><span class="Comment">//</span> Assignment:</span>
<span class="Storage">var</span> number <span class="Keyword">=</span> <span class="Number">42</span>;
<span class="Storage">var</span> opposite_day <span class="Keyword">=</span> <span class="BuiltInConstant">true</span>;
<span class="Comment"><span class="Comment">//</span> Conditions:</span>
<span class="Keyword">if</span> (opposite_day) {
  number <span class="Keyword">=</span> <span class="Keyword">-</span><span class="Number">42</span>;
}
<span class="Comment"><span class="Comment">//</span> Functions:</span>
<span class="Storage">var</span> <span class="FunctionName">square</span> = <span class="Storage">function</span>(<span class="FunctionArgument">x</span>) {
  <span class="Keyword">return</span> x <span class="Keyword">*</span> x;
};
<span class="Comment"><span class="Comment">//</span> Arrays:</span>
<span class="Storage">var</span> list <span class="Keyword">=</span> [<span class="Number">1</span>, <span class="Number">2</span>, <span class="Number">3</span>, <span class="Number">4</span>, <span class="Number">5</span>];
<span class="Comment"><span class="Comment">//</span> Objects:</span>
<span class="Storage">var</span> math <span class="Keyword">=</span> {
  root: <span class="LibraryClassType">Math</span>.sqrt,
  square: square,
  <span class="FunctionName">cube</span>: <span class="Storage">function</span>(<span class="FunctionArgument">x</span>) {
    <span class="Keyword">return</span> x <span class="Keyword">*</span> square(x);
  }
};
<span class="Comment"><span class="Comment">//</span> Array comprehensions:</span>
<span class="Storage">var</span> cubed_list;
<span class="Storage">var</span> a <span class="Keyword">=</span> list;
<span class="Storage">var</span> d <span class="Keyword">=</span> [];
<span class="Keyword">for</span> (<span class="Storage">var</span> b<span class="Keyword">=</span><span class="Number">0</span>, c<span class="Keyword">=</span>a.<span class="LibraryConstant">length</span>; b<span class="Keyword">&lt;</span>c; b<span class="Keyword">++</span>) {
  <span class="Storage">var</span> num <span class="Keyword">=</span> a[b];
  d[b] <span class="Keyword">=</span> math.cube(num);
}
cubed_list <span class="Keyword">=</span> d;
</pre><button onclick='javascript: 
// Assignment:
var number = 42;
var opposite_day = true;
// Conditions:
if (opposite_day) {
  number = -42;
}
// Functions:
var square = function(x) {
  return x * x;
};
// Arrays:
var list = [1, 2, 3, 4, 5];
// Objects:
var math = {
  root: Math.sqrt,
  square: square,
  cube: function(x) {
    return x * square(x);
  }
};
// Array comprehensions:
var cubed_list;
var a = list;
var d = [];
for (var b=0, c=a.length; b<c; b++) {
  var num = a[b];
  d[b] = math.cube(num);
}
cubed_list = d;
;alert(cubed_list);'>run: cubed_list</button><br class='clear' /></div>

    <h2 id="installation">Installation and Usage</h2>
    
    <p>
      The CoffeeScript compiler is written in pure Ruby, and is available
      as a Ruby Gem.
    </p>

    <pre>
gem install coffee-script</pre>

    <p>
      Installing the gem provides the <tt>coffee-script</tt> command, which can
      be used to compile CoffeeScript <tt>.cs</tt> files into JavaScript, as
      well as debug them. By default, <tt>coffee-script</tt> writes out the
      JavaScript as <tt>.js</tt> files in the same directory, but output
      can be customized with the following options:
    </p>

    <table>
      <tr>
        <td width="25%"><code>-o, --output [DIR]</code></td>
        <td>
          Write out all compiled JavaScript files into the specified directory.
        </td>
      </tr>
      <tr>
        <td><code>-w, --watch</code></td>
        <td>
          Watch the modification times of the coffee-scripts, recompiling as
          soon as a change occurs.
        </td>
      </tr>
      <tr>
        <td><code>-p, --print</code></td>
        <td>
          Instead of writing out the JavaScript as a file, print it
          directly to <b>stdout</b>.
        </td>
      </tr>
      <tr>
        <td><code>-l, --lint</code></td>
        <td>
          If the <tt>jsl</tt> (JavaScript Lint) command is installed, use it
          to check the compilation of a CoffeeScript file. (Handy in 
          conjunction with <tt>--watch</tt>)
        </td>
      </tr>
      <tr>
        <td><code>-e, --eval</code></td>
        <td>
          Compile and print a little snippet of CoffeeScript directly from the
          command line (or from <b>stdin</b>). For example:<br /><tt>coffee-script -e "square: x => x * x."</tt>
        </td>
      </tr>
      <tr>
        <td><code>-t, --tokens</code></td>
        <td>
          Instead of parsing the CoffeeScript, just lex it, and print out the
          token stream: <tt>[:IDENTIFIER, "square"], [":", ":"], [:PARAM, "x"]</tt> ...
        </td>
      </tr>
      <tr>
        <td><code>-v, --verbose</code></td>
        <td>
          As the JavaScript is being generated, print out every step of code
          generation, including lexical scope and the node in the
          AST.
        </td>
      </tr>
      <tr>
        <td><code>--install-bundle</code></td>
        <td>
          Install the TextMate bundle for CoffeeScript syntax highlighting.
        </td>
      </tr>
    </table>

    <p>
      <b>Examples:</b>
    </p>

    <pre>
coffee-script path/to/script.cs
coffee-script --watch --lint experimental.cs
coffee-script --print app/scripts/*.cs > concatenation.js</pre>

    <h2>Language Reference</h2>

    <p>
      <i>
        This reference is structured so that it can be read from top to bottom,
        if you like. Later sections use ideas and syntax previously introduced.
        Familiarity with JavaScript is assumed.
        In all of the following examples, the source CoffeeScript is provided on
        the left, and the direct compilation into JavaScript is on the right.
      </i>
    </p>

    <p id="punctuation">
      <b class="header">Punctuation Primer</b>
      You don't need to use semicolons <tt>;</tt> to terminate expressions, ending
      the line will do just as well. All other whitespace is
      not significant. Instead of using curly braces <tt>{ }</tt>
      to delimit a block of code, use a period <tt>.</tt> to mark the end of a
      block, for 
      <a href="#functions">functions</a>, 
      <a href="#conditionals">if-statements</a>, 
      <a href="#switch">switch</a>, and <a href="#try">try/catch</a>.
    </p>

    <p id="functions">
      <b class="header">Functions and Invocation</b>
      Functions are defined by a list of parameters, an arrow, and the 
      function body. The empty function looks like this: <tt>=>.</tt>
    </p>
    <div class='code'><pre class="idle"><span class="FunctionName">square</span><span class="Keyword">:</span> <span class="FunctionArgument">x</span> <span class="Storage">=&gt;</span> x <span class="Keyword">*</span> x.
<span class="FunctionName">cube</span><span class="Keyword">:</span>   <span class="FunctionArgument">x</span> <span class="Storage">=&gt;</span> square(x) <span class="Keyword">*</span> x.
</pre><pre class="idle"><span class="Storage">var</span> <span class="FunctionName">square</span> = <span class="Storage">function</span>(<span class="FunctionArgument">x</span>) {
  <span class="Keyword">return</span> x <span class="Keyword">*</span> x;
};
<span class="Storage">var</span> <span class="FunctionName">cube</span> = <span class="Storage">function</span>(<span class="FunctionArgument">x</span>) {
  <span class="Keyword">return</span> square(x) <span class="Keyword">*</span> x;
};
</pre><button onclick='javascript: var square = function(x) {
  return x * x;
};
var cube = function(x) {
  return square(x) * x;
};
;alert(cube(5));'>run: cube(5)</button><br class='clear' /></div>

    <p id="assignment">
      <b class="header">Assignment</b>
      Use a colon <tt>:</tt> to assign, as in
      <a href="http://json.org">JSON</a>. Equal signs are only needed for
      mathy things.
    </p>
    <div class='code'><pre class="idle">greeting<span class="Keyword">:</span> <span class="String"><span class="String">&quot;</span>Hello CoffeeScript<span class="String">&quot;</span></span>
difficulty<span class="Keyword">:</span> <span class="Number">0.5</span>
</pre><pre class="idle"><span class="Storage">var</span> greeting <span class="Keyword">=</span> <span class="String"><span class="String">&quot;</span>Hello CoffeeScript<span class="String">&quot;</span></span>;
<span class="Storage">var</span> difficulty <span class="Keyword">=</span> <span class="Number">0.5</span>;
</pre><button onclick='javascript: var greeting = "Hello CoffeeScript";
var difficulty = 0.5;
;alert(greeting);'>run: greeting</button><br class='clear' /></div>

    <p id="objects_and_arrays">
      <b class="header">Objects and Arrays</b>
      Object and Array literals look very similar to their JavaScript cousins.
      When you spread out each assignment on a separate line, the commas are
      optional. In this way, assigning object properties looks the same as
      assigning local variables.
    </p>
    <div class='code'><pre class="idle">song<span class="Keyword">:</span> [<span class="String"><span class="String">&quot;</span>do<span class="String">&quot;</span></span>, <span class="String"><span class="String">&quot;</span>re<span class="String">&quot;</span></span>, <span class="String"><span class="String">&quot;</span>mi<span class="String">&quot;</span></span>, <span class="String"><span class="String">&quot;</span>fa<span class="String">&quot;</span></span>, <span class="String"><span class="String">&quot;</span>so<span class="String">&quot;</span></span>]
ages<span class="Keyword">:</span> {
  max<span class="Keyword">:</span> <span class="Number">10</span>
  ida<span class="Keyword">:</span> <span class="Number">9</span>
  tim<span class="Keyword">:</span> <span class="Number">11</span>
}
</pre><pre class="idle"><span class="Storage">var</span> song <span class="Keyword">=</span> [<span class="String"><span class="String">&quot;</span>do<span class="String">&quot;</span></span>, <span class="String"><span class="String">&quot;</span>re<span class="String">&quot;</span></span>, <span class="String"><span class="String">&quot;</span>mi<span class="String">&quot;</span></span>, <span class="String"><span class="String">&quot;</span>fa<span class="String">&quot;</span></span>, <span class="String"><span class="String">&quot;</span>so<span class="String">&quot;</span></span>];
<span class="Storage">var</span> ages <span class="Keyword">=</span> {
  max: <span class="Number">10</span>,
  ida: <span class="Number">9</span>,
  tim: <span class="Number">11</span>
};
</pre><button onclick='javascript: var song = ["do", "re", "mi", "fa", "so"];
var ages = {
  max: 10,
  ida: 9,
  tim: 11
};
;alert(song.join(","));'>run: song.join(",")</button><br class='clear' /></div>

    <p id="lexical_scope">
      <b class="header">Lexical Scoping and Variable Safety</b>
      The CoffeeScript compiler takes care to make sure that all of your variables
      are properly declared within lexical scope &mdash; you never need to write
      <tt>var</tt> yourself.
    </p>
    <div class='code'><pre class="idle">num<span class="Keyword">:</span> <span class="Number">1</span>
<span class="FunctionName">change_numbers</span><span class="Keyword">:</span> <span class="Storage">=&gt;</span>
  num<span class="Keyword">:</span> <span class="Number">2</span>
  new_num<span class="Keyword">:</span> <span class="Number">3</span>.
new_num<span class="Keyword">:</span> change_numbers()
</pre><pre class="idle"><span class="Storage">var</span> num <span class="Keyword">=</span> <span class="Number">1</span>;
<span class="Storage">var</span> <span class="FunctionName">change_numbers</span> = <span class="Storage">function</span>() {
  num <span class="Keyword">=</span> <span class="Number">2</span>;
  <span class="Storage">var</span> new_num <span class="Keyword">=</span> <span class="Number">3</span>;
  <span class="Keyword">return</span> new_num;
};
<span class="Storage">var</span> new_num <span class="Keyword">=</span> change_numbers();
</pre><button onclick='javascript: var num = 1;
var change_numbers = function() {
  num = 2;
  var new_num = 3;
  return new_num;
};
var new_num = change_numbers();
;alert(new_num);'>run: new_num</button><br class='clear' /></div>
    <p>
      Notice how the variables are declared with <tt>var</tt> the first time
      they appear. The second reference of <b>num</b>, within the function,
      is not redeclared because <b>num</b> is still in scope. As opposed
      to the second occurrence of <b>new_num</b>, in the last line.
    </p>
    <p>
      Although suppressed within this documentation for clarity, all
      CoffeeScript output is wrapped in an anonymous function:
      <tt>(function(){ ... })();</tt> This safety wrapper, combined with the
      automatic generation of the <tt>var</tt> keyword, make it exceedingly difficult
      to pollute the global namespace by accident.
    </p>

    <p id="conditionals">
      <b class="header">Conditionals, Ternaries, and Conditional Assignment</b>
      <b>If/else</b> statements can be written without the use of parenthesis and
      curly brackets. As with functions and other block expressions, conditionals
      are closed with periods. No period is necessary when using the single-line
      postfix form, with the <tt>if</tt> at the end.
    </p>
    <p>
      CoffeeScript will compile <b>if</b> statements using the ternary operator
      when possible, to make it easier to use the result as an expression.
    </p>
    <div class='code'><pre class="idle">mood<span class="Keyword">:</span> greatly_improved <span class="Keyword">if</span> singing

<span class="Keyword">if</span> happy <span class="Keyword">and</span> knows_it
  claps_hands()
  cha_cha_cha().

date<span class="Keyword">:</span> <span class="Keyword">if</span> friday <span class="Keyword">then</span> sue <span class="Keyword">else</span> jill.

expensive <span class="Keyword">||</span><span class="Keyword">:</span> do_the_math()
</pre><pre class="idle"><span class="Storage">var</span> mood;
<span class="Keyword">if</span> (singing) {
  mood <span class="Keyword">=</span> greatly_improved;
}
<span class="Keyword">if</span> (happy <span class="Keyword">&amp;</span><span class="Keyword">&amp;</span> knows_it) {
  claps_hands();
  cha_cha_cha();
}
<span class="Storage">var</span> date <span class="Keyword">=</span> friday ? sue : jill;
expensive <span class="Keyword">=</span> expensive <span class="Keyword">||</span> do_the_math();
</pre><br class='clear' /></div>
    <p>
      The conditional assignment operators are available: <tt>||:</tt>,
      which only assigns a value to a variable if the variable's current value
      is falsy, and <tt>&amp;&amp;:</tt>, which only replaces the value of
      truthy variables.
    </p>

    <p id="expressions">
      <b class="header">Everything is an Expression (at least, as much as possible)</b>
      You might have noticed how even though we don't add return statements
      to CoffeeScript functions, they nonetheless return their final value.
      The CoffeeScript compiler tries to make sure that all statements in the
      language can be used as expressions. Watch how the <tt>return</tt> gets
      pushed down into each possible branch of execution, in the function
      below.
    </p>
    <div class='code'><pre class="idle"><span class="FunctionName">grade</span><span class="Keyword">:</span> <span class="FunctionArgument">student</span> <span class="Storage">=&gt;</span>
  <span class="Keyword">if</span> student.excellent_work
    <span class="String"><span class="String">&quot;</span>A+<span class="String">&quot;</span></span>
  <span class="Keyword">else</span> <span class="Keyword">if</span> student.okay_stuff
    <span class="Keyword">if</span> student.tried_hard <span class="Keyword">then</span> <span class="String"><span class="String">&quot;</span>B<span class="String">&quot;</span></span> <span class="Keyword">else</span> <span class="String"><span class="String">&quot;</span>B-<span class="String">&quot;</span></span>.
  <span class="Keyword">else</span>
    <span class="String"><span class="String">&quot;</span>C<span class="String">&quot;</span></span>..

eldest<span class="Keyword">:</span> <span class="Keyword">if</span> <span class="Number">24</span> <span class="Keyword">&gt;</span> <span class="Number">21</span> <span class="Keyword">then</span> <span class="String"><span class="String">&quot;</span>Liz<span class="String">&quot;</span></span> <span class="Keyword">else</span> <span class="String"><span class="String">&quot;</span>Ike<span class="String">&quot;</span></span>.
</pre><pre class="idle"><span class="Storage">var</span> <span class="FunctionName">grade</span> = <span class="Storage">function</span>(<span class="FunctionArgument">student</span>) {
  <span class="Keyword">if</span> (student.excellent_work) {
    <span class="Keyword">return</span> <span class="String"><span class="String">&quot;</span>A+<span class="String">&quot;</span></span>;
  } <span class="Keyword">else</span> <span class="Keyword">if</span> (student.okay_stuff) {
    <span class="Keyword">return</span> student.tried_hard ? <span class="String"><span class="String">&quot;</span>B<span class="String">&quot;</span></span> : <span class="String"><span class="String">&quot;</span>B-<span class="String">&quot;</span></span>;
  } <span class="Keyword">else</span> {
    <span class="Keyword">return</span> <span class="String"><span class="String">&quot;</span>C<span class="String">&quot;</span></span>;
  }
};
<span class="Storage">var</span> eldest <span class="Keyword">=</span> <span class="Number">24</span> <span class="Keyword">&gt;</span> <span class="Number">21</span> ? <span class="String"><span class="String">&quot;</span>Liz<span class="String">&quot;</span></span> : <span class="String"><span class="String">&quot;</span>Ike<span class="String">&quot;</span></span>;
</pre><button onclick='javascript: var grade = function(student) {
  if (student.excellent_work) {
    return "A+";
  } else if (student.okay_stuff) {
    return student.tried_hard ? "B" : "B-";
  } else {
    return "C";
  }
};
var eldest = 24 > 21 ? "Liz" : "Ike";
;alert(eldest);'>run: eldest</button><br class='clear' /></div>
    <p>
      The same mechanism is used to push down assignment through <b>switch</b>
      statements, and <b>if-elses</b> (although the ternary operator is preferred).
    </p>
    
    <p id="aliases">
      <b class="header">Aliases</b>
      Because the <tt>==</tt> operator frequently causes undesirable coercion,
      is intransitive, and has a different meaning than in other languages,
      CoffeeScript compiles <tt>==</tt> into <tt>===</tt>, and <tt>!=</tt> into
      <tt>!==</tt>.
      In addition, <tt>is</tt> compiles into <tt>===</tt>,
      and <tt>aint</tt> into <tt>!==</tt>.
    </p>
    <p>
      You can use <tt>not</tt> as an alias for <tt>!</tt>.
    </p>
    <p>
      Instead of a newline or semicolon, <tt>then</tt> can be used to separate
      conditions from expressions, in <b>while</b>, 
      <b>if</b>/<b>else</b>, and <b>switch</b>/<b>when</b> statements.
    </p>
    <p>
      As in <a href="http://yaml.org/">YAML</a>, <tt>on</tt> and <tt>yes</tt>
      are the same as boolean <tt>true</tt>, while <tt>off</tt> and <tt>no</tt> are boolean <tt>false</tt>.
    </p>
    <p>
      For single-line statements, <tt>unless</tt> can be used as the inverse of <tt>if</tt>.
    </p>
    <div class='code'><pre class="idle">launch() <span class="Keyword">if</span> ignition <span class="Keyword">is</span> <span class="BuiltInConstant">on</span>

volume<span class="Keyword">:</span> <span class="Number">10</span> <span class="Keyword">if</span> band <span class="Keyword">aint</span> spinal_tap

let_the_wild_rumpus_begin() <span class="Keyword">unless</span> answer <span class="Keyword">is</span> <span class="BuiltInConstant">no</span>

<span class="Keyword">if</span> car.speed <span class="Keyword">&lt;</span> speed_limit <span class="Keyword">then</span> accelerate().
</pre><pre class="idle"><span class="Keyword">if</span> (ignition <span class="Keyword">===</span> <span class="BuiltInConstant">true</span>) {
  launch();
}
<span class="Storage">var</span> volume;
<span class="Keyword">if</span> (band <span class="Keyword">!</span><span class="Keyword">==</span> spinal_tap) {
  volume <span class="Keyword">=</span> <span class="Number">10</span>;
}
<span class="Keyword">if</span> (<span class="Keyword">!</span>(answer <span class="Keyword">===</span> <span class="BuiltInConstant">false</span>)) {
  let_the_wild_rumpus_begin();
}
car.speed <span class="Keyword">&lt;</span> speed_limit ? accelerate() : <span class="BuiltInConstant">null</span>;
</pre><br class='clear' /></div>

    <p id="while">
      <b class="header">While Loops</b>
      The only low-level loop that CoffeeScript provides is the while loop.
    </p>
    <div class='code'><pre class="idle"><span class="Keyword">while</span> demand <span class="Keyword">&gt;</span> supply
  sell()
  restock().

<span class="Keyword">while</span> supply <span class="Keyword">&gt;</span> demand <span class="Keyword">then</span> buy().
</pre><pre class="idle"><span class="Keyword">while</span> (demand <span class="Keyword">&gt;</span> supply) {
  sell();
  restock();
}
<span class="Keyword">while</span> (supply <span class="Keyword">&gt;</span> demand) {
  buy();
}
</pre><br class='clear' /></div>
    <p>
      Other JavaScript loops, such as <b>for</b> loops and <b>do-while</b> loops
      can be mimicked by variations on <b>while</b>, but the hope is that you
      won't need to do that with CoffeeScript, either because you're using
      <b>each</b> (<b>forEach</b>) style iterators, or...
    </p>

    <p id="array_comprehensions">
      <b class="header">Array Comprehensions</b>
      For your looping needs, CoffeeScript provides array comprehensions
      similar to Python's. They replace (and compile into) <b>for</b> loops, with
      optional guard clauses and the value of the current array index.
      Unlike for loops, array comprehensions are expressions, and can be returned
      and assigned. They should be able to handle most places where you otherwise
      would use a loop, <b>each</b>/<b>forEach</b>, <b>map</b>, or <b>select</b>/<b>filter</b>.
    </p>
    <div class='code'><pre class="idle"><span class="Comment"><span class="Comment">#</span> Eat lunch.</span>
lunch<span class="Keyword">:</span> food.eat() <span class="Keyword">for</span> food <span class="Keyword">in</span> [<span class="String"><span class="String">'</span>toast<span class="String">'</span></span>, <span class="String"><span class="String">'</span>cheese<span class="String">'</span></span>, <span class="String"><span class="String">'</span>wine<span class="String">'</span></span>].

<span class="Comment"><span class="Comment">#</span> Zebra-stripe a table.</span>
highlight(row) <span class="Keyword">for</span> row, i <span class="Keyword">in</span> table <span class="Keyword">if</span> i <span class="Keyword">%</span> <span class="Number">2</span> <span class="Keyword">is</span> <span class="Number">0</span>.
</pre><pre class="idle">
<span class="Comment"><span class="Comment">//</span> Eat lunch.</span>
<span class="Storage">var</span> lunch;
<span class="Storage">var</span> a <span class="Keyword">=</span> [<span class="String"><span class="String">'</span>toast<span class="String">'</span></span>, <span class="String"><span class="String">'</span>cheese<span class="String">'</span></span>, <span class="String"><span class="String">'</span>wine<span class="String">'</span></span>];
<span class="Storage">var</span> d <span class="Keyword">=</span> [];
<span class="Keyword">for</span> (<span class="Storage">var</span> b<span class="Keyword">=</span><span class="Number">0</span>, c<span class="Keyword">=</span>a.<span class="LibraryConstant">length</span>; b<span class="Keyword">&lt;</span>c; b<span class="Keyword">++</span>) {
  <span class="Storage">var</span> food <span class="Keyword">=</span> a[b];
  d[b] <span class="Keyword">=</span> food.eat();
}
lunch <span class="Keyword">=</span> d;
<span class="Comment"><span class="Comment">//</span> Zebra-stripe a table.</span>
<span class="Storage">var</span> e <span class="Keyword">=</span> table;
<span class="Keyword">for</span> (<span class="Storage">var</span> f<span class="Keyword">=</span><span class="Number">0</span>, g<span class="Keyword">=</span>e.<span class="LibraryConstant">length</span>; f<span class="Keyword">&lt;</span>g; f<span class="Keyword">++</span>) {
  <span class="Storage">var</span> row <span class="Keyword">=</span> e[f];
  <span class="Storage">var</span> i <span class="Keyword">=</span> f;
  i <span class="Keyword">%</span> <span class="Number">2</span> <span class="Keyword">===</span> <span class="Number">0</span> ? highlight(row) : <span class="BuiltInConstant">null</span>;
}
</pre><br class='clear' /></div>

    <p id="slice">
      <b class="header">Array Slice Literals</b>
      CoffeeScript includes syntax for extracting slices of arrays.
      The first argument is the index of the first element in the slice, and
      the second is the index of the last one.
    </p>
    <div class='code'><pre class="idle">nums<span class="Keyword">:</span> [<span class="Number">0</span>, <span class="Number">1</span>, <span class="Number">2</span>, <span class="Number">3</span>, <span class="Number">4</span>, <span class="Number">5</span>, <span class="Number">6</span>, <span class="Number">7</span>, <span class="Number">8</span>, <span class="Number">9</span>]
three_to_six<span class="Keyword">:</span> nums[<span class="Number">3</span>, <span class="Number">6</span>]
</pre><pre class="idle"><span class="Storage">var</span> nums <span class="Keyword">=</span> [<span class="Number">0</span>, <span class="Number">1</span>, <span class="Number">2</span>, <span class="Number">3</span>, <span class="Number">4</span>, <span class="Number">5</span>, <span class="Number">6</span>, <span class="Number">7</span>, <span class="Number">8</span>, <span class="Number">9</span>];
<span class="Storage">var</span> three_to_six <span class="Keyword">=</span> nums.<span class="LibraryFunction">slice</span>(<span class="Number">3</span>, <span class="Number">6</span> <span class="Keyword">+</span> <span class="Number">1</span>);
</pre><button onclick='javascript: var nums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
var three_to_six = nums.slice(3, 6 + 1);
;alert(three_to_six);'>run: three_to_six</button><br class='clear' /></div>

    <p id="super">
      <b class="header">Calling Super from a Subclass</b>
      JavaScript's prototypal inheritance has always been a bit of a
      brain-bender, with a whole family tree of libraries that provide a cleaner
      syntax for classical inheritance on top of JavaScript's prototypes:
      <a href="http://code.google.com/p/base2/">Base2</a>,
      <a href="http://prototypejs.org/">Prototype.js</a>,
      <a href="http://jsclass.jcoglan.com/">JS.Class</a>, etc.
      The libraries provide syntactic sugar, but the built-in inheritance would
      be completely usable if it weren't for one small exception:
      it's very awkward to call <b>super</b>, the prototype object's
      implementation of the current function. CoffeeScript converts
      <tt>super()</tt> calls into calls against the immediate ancestor's
      method of the same name.
    </p>
    <div class='code'><pre class="idle"><span class="FunctionName">Animal</span><span class="Keyword">:</span> <span class="Storage">=&gt;</span> .
<span class="FunctionName">Animal.prototype.move</span><span class="Keyword">:</span> <span class="FunctionArgument">meters</span> <span class="Storage">=&gt;</span>
  alert(<span class="Variable">this</span>.name <span class="Keyword">+</span> <span class="String"><span class="String">&quot;</span> moved <span class="String">&quot;</span></span> <span class="Keyword">+</span> meters <span class="Keyword">+</span> <span class="String"><span class="String">&quot;</span>m.<span class="String">&quot;</span></span>).

<span class="FunctionName">Snake</span><span class="Keyword">:</span> <span class="FunctionArgument">name</span> <span class="Storage">=&gt;</span> <span class="Variable">this</span>.name<span class="Keyword">:</span> name.
Snake.prototype<span class="Keyword">:</span> <span class="Keyword">new</span> <span class="TypeName">Animal</span>()
<span class="FunctionName">Snake.prototype.move</span><span class="Keyword">:</span> <span class="Storage">=&gt;</span>
  alert(<span class="String"><span class="String">&quot;</span>Slithering...<span class="String">&quot;</span></span>)
  <span class="Variable">super</span>(<span class="Number">5</span>).

<span class="FunctionName">Horse</span><span class="Keyword">:</span> <span class="FunctionArgument">name</span> <span class="Storage">=&gt;</span> <span class="Variable">this</span>.name<span class="Keyword">:</span> name.
Horse.prototype<span class="Keyword">:</span> <span class="Keyword">new</span> <span class="TypeName">Animal</span>()
<span class="FunctionName">Horse.prototype.move</span><span class="Keyword">:</span> <span class="Storage">=&gt;</span>
  alert(<span class="String"><span class="String">&quot;</span>Galloping...<span class="String">&quot;</span></span>)
  <span class="Variable">super</span>(<span class="Number">45</span>).

sam<span class="Keyword">:</span> <span class="Keyword">new</span> <span class="TypeName">Snake</span>(<span class="String"><span class="String">&quot;</span>Sammy the Python<span class="String">&quot;</span></span>)
tom<span class="Keyword">:</span> <span class="Keyword">new</span> <span class="TypeName">Horse</span>(<span class="String"><span class="String">&quot;</span>Tommy the Palomino<span class="String">&quot;</span></span>)

sam.move()
tom.move()




</pre><pre class="idle"><span class="Storage">var</span> <span class="FunctionName">Animal</span> = <span class="Storage">function</span>() {
};
<span class="LibraryClassType">Animal</span>.<span class="LibraryConstant">prototype</span>.<span class="FunctionName">move</span> = <span class="Storage">function</span>(<span class="FunctionArgument">meters</span>) {
  <span class="Keyword">return</span> <span class="LibraryFunction">alert</span>(<span class="Variable">this</span>.<span class="LibraryConstant">name</span> <span class="Keyword">+</span> <span class="String"><span class="String">&quot;</span> moved <span class="String">&quot;</span></span> <span class="Keyword">+</span> meters <span class="Keyword">+</span> <span class="String"><span class="String">&quot;</span>m.<span class="String">&quot;</span></span>);
};
<span class="Storage">var</span> <span class="FunctionName">Snake</span> = <span class="Storage">function</span>(<span class="FunctionArgument">name</span>) {
  <span class="Variable">this</span>.<span class="LibraryConstant">name</span> <span class="Keyword">=</span> name;
  <span class="Keyword">return</span> <span class="Variable">this</span>.<span class="LibraryConstant">name</span>;
};
<span class="LibraryClassType">Snake</span>.<span class="LibraryConstant">prototype</span> = <span class="Keyword">new</span> <span class="TypeName">Animal</span>();
<span class="LibraryClassType">Snake</span>.<span class="LibraryConstant">prototype</span>.<span class="FunctionName">move</span> = <span class="Storage">function</span>() {
  <span class="LibraryFunction">alert</span>(<span class="String"><span class="String">&quot;</span>Slithering...<span class="String">&quot;</span></span>);
  <span class="Keyword">return</span> <span class="Variable">this</span>.<span class="LibraryConstant">constructor</span>.<span class="LibraryConstant">prototype</span>.move.<span class="LibraryFunction">call</span>(<span class="Variable">this</span>, <span class="Number">5</span>);
};
<span class="Storage">var</span> <span class="FunctionName">Horse</span> = <span class="Storage">function</span>(<span class="FunctionArgument">name</span>) {
  <span class="Variable">this</span>.<span class="LibraryConstant">name</span> <span class="Keyword">=</span> name;
  <span class="Keyword">return</span> <span class="Variable">this</span>.<span class="LibraryConstant">name</span>;
};
<span class="LibraryClassType">Horse</span>.<span class="LibraryConstant">prototype</span> = <span class="Keyword">new</span> <span class="TypeName">Animal</span>();
<span class="LibraryClassType">Horse</span>.<span class="LibraryConstant">prototype</span>.<span class="FunctionName">move</span> = <span class="Storage">function</span>() {
  <span class="LibraryFunction">alert</span>(<span class="String"><span class="String">&quot;</span>Galloping...<span class="String">&quot;</span></span>);
  <span class="Keyword">return</span> <span class="Variable">this</span>.<span class="LibraryConstant">constructor</span>.<span class="LibraryConstant">prototype</span>.move.<span class="LibraryFunction">call</span>(<span class="Variable">this</span>, <span class="Number">45</span>);
};
<span class="Storage">var</span> sam <span class="Keyword">=</span> <span class="Keyword">new</span> <span class="TypeName">Snake</span>(<span class="String"><span class="String">&quot;</span>Sammy the Python<span class="String">&quot;</span></span>);
<span class="Storage">var</span> tom <span class="Keyword">=</span> <span class="Keyword">new</span> <span class="TypeName">Horse</span>(<span class="String"><span class="String">&quot;</span>Tommy the Palomino<span class="String">&quot;</span></span>);
sam.move();
tom.move();
</pre><button onclick='javascript: var Animal = function() {
};
Animal.prototype.move = function(meters) {
  return alert(this.name + " moved " + meters + "m.");
};
var Snake = function(name) {
  this.name = name;
  return this.name;
};
Snake.prototype = new Animal();
Snake.prototype.move = function() {
  alert("Slithering...");
  return this.constructor.prototype.move.call(this, 5);
};
var Horse = function(name) {
  this.name = name;
  return this.name;
};
Horse.prototype = new Animal();
Horse.prototype.move = function() {
  alert("Galloping...");
  return this.constructor.prototype.move.call(this, 45);
};
var sam = new Snake("Sammy the Python");
var tom = new Horse("Tommy the Palomino");
sam.move();
tom.move();
;'>run</button><br class='clear' /></div>

    <p id="embedded">
      <b class="header">Embedded JavaScript</b>
      If you ever need to interpolate literal JavaScript snippets, you can
      use backticks to pass JavaScript straight through.
    </p>
    <div class='code'><pre class="idle">hi<span class="Keyword">:</span> <span class="String"><span class="String">`</span>function() {</span>
<span class="String">  return [document.title, &quot;Hello JavaScript&quot;].join(&quot;: &quot;);</span>
<span class="String">}<span class="String">`</span></span>

</pre><pre class="idle"><span class="Storage">var</span> <span class="FunctionName">hi</span> = <span class="Storage">function</span>() {
<span class="Keyword">return</span> [<span class="LibraryClassType">document</span>.<span class="LibraryConstant">title</span>, <span class="String"><span class="String">&quot;</span>Hello JavaScript<span class="String">&quot;</span></span>].<span class="LibraryFunction">join</span>(<span class="String"><span class="String">&quot;</span>: <span class="String">&quot;</span></span>);
};
</pre><button onclick='javascript: var hi = function() {
return [document.title, "Hello JavaScript"].join(": ");
};
;alert(hi());'>run: hi()</button><br class='clear' /></div>

    <p id="switch">
      <b class="header">Switch/When/Else</b>
      <b>Switch</b> statements in JavaScript are rather broken. You can only
      do comparisons based on string equality, and need to remember to <b>break</b> at the end of
      every <b>case</b> statement to avoid accidentally falling through to
      the default case. CoffeeScript compiles <b>switch</b> statements into JavaScript if-else chains, allowing you to
      compare any object (via <b>===</b>), preventing fall-through, and resulting
      in a returnable, assignable expression. The format is: <tt>switch</tt> condition,
      <tt>when</tt> clauses, <tt>else</tt> the default case.
    </p>
    <div class='code'><pre class="idle"><span class="Keyword">switch</span> day
when <span class="String"><span class="String">&quot;</span>Tuesday<span class="String">&quot;</span></span>   <span class="Keyword">then</span> eat_breakfast()
when <span class="String"><span class="String">&quot;</span>Wednesday<span class="String">&quot;</span></span> <span class="Keyword">then</span> go_to_the_park()
when <span class="String"><span class="String">&quot;</span>Saturday<span class="String">&quot;</span></span>
  <span class="Keyword">if</span> day <span class="Keyword">is</span> bingo_day
    go_to_bingo()
    go_dancing().
when <span class="String"><span class="String">&quot;</span>Sunday<span class="String">&quot;</span></span>    <span class="Keyword">then</span> go_to_church()
<span class="Keyword">else</span> go_to_work().
</pre><pre class="idle"><span class="Keyword">if</span> (day <span class="Keyword">===</span> <span class="String"><span class="String">&quot;</span>Tuesday<span class="String">&quot;</span></span>) {
  eat_breakfast();
} <span class="Keyword">else</span> <span class="Keyword">if</span> (day <span class="Keyword">===</span> <span class="String"><span class="String">&quot;</span>Wednesday<span class="String">&quot;</span></span>) {
  go_to_the_park();
} <span class="Keyword">else</span> <span class="Keyword">if</span> (day <span class="Keyword">===</span> <span class="String"><span class="String">&quot;</span>Saturday<span class="String">&quot;</span></span>) {
  <span class="Keyword">if</span> (day <span class="Keyword">===</span> bingo_day) {
    go_to_bingo();
    go_dancing();
  }
} <span class="Keyword">else</span> <span class="Keyword">if</span> (day <span class="Keyword">===</span> <span class="String"><span class="String">&quot;</span>Sunday<span class="String">&quot;</span></span>) {
  go_to_church();
} <span class="Keyword">else</span> {
  go_to_work();
}
</pre><br class='clear' /></div>

    <p id="try">
      <b class="header">Try/Catch/Finally</b>
      Try/catch statements are just about the same as JavaScript (although
      they work as expressions).
    </p>
    <div class='code'><pre class="idle"><span class="Keyword">try</span>
  all_hell_breaks_loose()
  cats_and_dogs_living_together()
<span class="Keyword">catch</span> error
  print(error)
<span class="Keyword">finally</span>
  clean_up().
</pre><pre class="idle"><span class="Keyword">try</span> {
  all_hell_breaks_loose();
  cats_and_dogs_living_together();
} <span class="Keyword">catch</span> (error) {
  <span class="LibraryFunction">print</span>(error);
} <span class="Keyword">finally</span> {
  clean_up();
}
</pre><br class='clear' /></div>

    <p id="try">
      <b class="header">Multiline Strings</b>
      Multiline strings are allowed in CoffeeScript.
    </p>
    <div class='code'><pre class="idle">moby_dick<span class="Keyword">:</span> <span class="String"><span class="String">&quot;</span>Call me Ishmael. Some years ago --</span>
<span class="String">never mind how long precisely -- having little</span>
<span class="String">or no money in my purse, and nothing particular</span>
<span class="String">to interest me on shore, I thought I would sail</span>
<span class="String">about a little and see the watery part of the</span>
<span class="String">world...<span class="String">&quot;</span></span>

</pre><pre class="idle"><span class="Storage">var</span> moby_dick <span class="Keyword">=</span> <span class="String"><span class="String">&quot;</span>Call me Ishmael. Some years ago -- \</span>
<span class="String">never mind how long precisely -- having little \</span>
<span class="String">or no money in my purse, and nothing particular \</span>
<span class="String">to interest me on shore, I thought I would sail \</span>
<span class="String">about a little and see the watery part of the \</span>
<span class="String">world...<span class="String">&quot;</span></span>;
</pre><button onclick='javascript: var moby_dick = "Call me Ishmael. Some years ago -- \
never mind how long precisely -- having little \
or no money in my purse, and nothing particular \
to interest me on shore, I thought I would sail \
about a little and see the watery part of the \
world...";
;alert(moby_dick);'>run: moby_dick</button><br class='clear' /></div>
    
    <h2 id="contributing">Contributing</h2>
    
    <p>
      Here's a wish list of things that would be wonderful to have in
      CoffeeScript:
    </p>
    
    <ul>
      <li>
        A JavaScript version of the compiler, perhaps using Alessandro Warth's
        <a href="http://tinlizzie.org/ometa/">OMeta</a>.
      </li>
      <li>
        Ideas for alternate syntax to end blocks of expressions &mdash; the periods
        can look a little weird with deeply nested structure.
      </li>
      <li>
        Test cases for any syntax errors you encounter that you think CoffeeScript
        should be able to compile properly.
      </li>
      <li>
        A tutorial that introduces CoffeeScript from the ground up for folks 
        without knowledge of JavaScript.
      </li>
      <li>
        Integration with Processing.js's JavaScript API (this would depend on
        having a JavaScript version of the compiler).
      </li>
      <li>
        A lot of the code generation in <tt>nodes.rb</tt> gets into messy 
        string manipulation. Techniques for cleaning this up across the board
        would be appreciated.
      </li>
    </ul>
    
    <h2 id="change_log">Change Log</h2>
    
    <p>
      <b class="header" style="margin-top: 25px;">0.1.1</b>
      Added <tt>instanceof</tt> and <tt>typeof</tt> as operators.
    </p>
    
    <p>
      <b class="header" style="margin-top: 25px;">0.1.0</b>
      Initial CoffeeScript release.
    </p>

  </div>

</body>
</html>
